<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GerenciALL | Login</title>
    <link rel="stylesheet" href="../style/dashboard.css">
    <link rel="stylesheet" href="../style/login.css">
    <link rel="stylesheet" href="../style/generico/footer.css"> <!-- Genérico -->
    <link rel="stylesheet" href="../style/generico/header.css"> <!-- Genérico -->
    <link rel="shortcut icon" href="../images/favicon_io/favicon.ico" type="image/x-icon">
    <script src="../script/login.js"></script>
</head>
<body>
    <header>
        <img src="../images/logo/logoGerenciall.png" alt="logo do site" id="logo">
        <div class="remember-container">
        <span style="color: white;">Theme</span>
        <label class="switch">
            <input type="checkbox" id="remember-toggle" onclick="alternarTema()">
            <span class="slider"></span>
        </label>
        </div>
    </header>

    <main>
        <section class="titulo">
            <h2>Suas Tarefas</h2>
            <hr>
            <div class="acoes-topo">
                <label for="ordenar">Ordenar por:</label>
                <select id="ordenar" class="filtro-select">
                    <option>Prioridade</option>
                    <option>Status</option>
                    <option>Data</option>
                </select>
                <button id="btnNova" onclick="window.location.href='criar-tarefa.html'">Nova Tarefa</button>
                <button id="btnExportar" onclick="exportarJSON()">Exportar JSON</button>
            </div>
        </section>
        <section id="lista-tarefas"></section>
    </main>

    <footer>       
        <div class="footer-conteudo">
            <div class="devs">
                <h2>Desenvolvedores</h2>
                <ul class="devs-table">
                    <!-- Para cada dev -->
                    <li>
                        <span>Kaliel Selhorst</span>
                        <a href="https://github.com/Selhorstkaliel" target="_blank"><img src="../images/redes-sociais/github.png" alt="GitHub"></a>
                        <a href="https://www.instagram.com/selhorstkaliel?igsh=c3Y5YzdvZ2gwcW82" target="_blank"><img src="../images/redes-sociais/instagram.png" alt="Instagram"></a>
                        <a href="https://www.linkedin.com/in/kaliel-selhorst-3baa12350/" target="_blank"><img src="../images/redes-sociais/linkedin.png" alt="LinkedIN"></a>
                    </li>
                    <li>
                        <span>Victor H Fedatto</span>
                        <a href="https://github.com/vhfedatto" target="_blank"><img src="../images/redes-sociais/github.png" alt="GitHub"></a>
                        <a href="#" target="_blank"><img src="../images/redes-sociais/instagram.png" alt="Instagram"></a>
                        <a href="#" target="_blank"><img src="../images/redes-sociais/linkedin.png" alt="LinkedIN"></a>
                    </li>
                    <li>
                        <span>Alisson Rafael</span>
                        <a href="#" target="_blank"><img src="../images/redes-sociais/github.png" alt="GitHub"></a>
                        <a href="#" target="_blank"><img src="../images/redes-sociais/instagram.png" alt="Instagram"></a>
                        <a href="#" target="_blank"><img src="../images/redes-sociais/linkedin.png" alt="LinkedIN"></a>
                    </li>
                    <li>
                        <span>Guilherme Santos</span>
                        <a href="https://github.com/GuilhermeSBS10" target="_blank"><img src="../images/redes-sociais/github.png" alt="GitHub"></a>
                        <a href="#"target="_blank"><img src="../images/redes-sociais/instagram.png" alt="Instagram"></a>
                        <a href="#"target="_blank"><img src="../images/redes-sociais/linkedin.png" alt="LinkedIN"></a>
                    </li>
                    <li>
                        <span>Rodrigo Farias</span>
                        <a href="#" target="_blank"><img src="../images/redes-sociais/github.png" alt="GitHub"></a>
                        <a href="#" target="_blank"><img src="../images/redes-sociais/instagram.png" alt="Instagram"></a>
                        <a href="#" target="_blank"><img src="../images/redes-sociais/linkedin.png" alt="LinkedIN"></a>
                    </li>
                    <!-- Outros devs seguem o mesmo padrão -->
                </ul>
            </div>
            <hr>
        </div>
        <p class="copyright">&copy; 2025 GerenciAll; Site desenvolvido pela equipe [nome]. Todos os direitos reservados.</p>
    </footer>

    <script>
        let tarefas = [
        {
            titulo: "Estudar Java",
            descricao: "Estudo intensivo para backend com Spring Boot.",
            prioridade: "alta",
            status: "pendente",
            data: "2025-06-04"
        },
        {
            titulo: "Apresentação StepUp",
            descricao: "Preparar slides e ensaiar fala.",
            prioridade: "media",
            status: "feita",
            data: "2025-06-04"
        },
        {
            titulo: "Criar Tela Criar-Tarefa",
            descricao: "Programar o frontend da nova tela.",
            prioridade: "baixa",
            status: "pendente",
            data: "2025-06-06"
        }
        ];

        function criarTarefaCard(tarefa, index) {
        const cores = {
            alta: "#DC2626",
            media: "#FACC15",
            baixa: "#93C5FD"
        };

        const statusCores = {
            pendente: "#9CA3AF",
            feita: "#10B981"
        };

        const linha = document.createElement("div");
        linha.className = "caixa-tarefa";

        const botoes = document.createElement("div");
        botoes.className = "botoes-card";

        const btnEditar = document.createElement("button");
        btnEditar.className = "icon-button";
        btnEditar.innerHTML = "&#9998;";

        const btnExcluir = document.createElement("button");
        btnExcluir.className = "icon-button";
        btnExcluir.innerHTML = "&#128465;";
        btnExcluir.onclick = () => {
            tarefas.splice(index, 1);
            carregarTarefas();
        };

        botoes.appendChild(btnEditar);
        botoes.appendChild(btnExcluir);

        const card = document.createElement("div");
        card.className = "card";
        card.style.borderLeft = `12px solid ${cores[tarefa.prioridade]}`;

        const statusSpan = document.createElement("span");
        statusSpan.className = "status";
        statusSpan.style.backgroundColor = statusCores[tarefa.status];
        statusSpan.textContent = tarefa.status.charAt(0).toUpperCase() + tarefa.status.slice(1);

        const btnFeito = document.createElement("button");
        btnFeito.className = tarefa.status === 'feita' ? 'btn-feito' : 'btn-normal';
        btnFeito.textContent = tarefa.status === 'feita' ? 'Feito' : 'Marcar como feito';
        btnFeito.onclick = () => {
            tarefa.status = 'feita';
            carregarTarefas();
        };

        card.innerHTML = `
            <h3>${tarefa.titulo}</h3>
            <p>${tarefa.descricao}</p>
        `;

        const actions = document.createElement("div");
        actions.className = "card-actions";
        actions.appendChild(statusSpan);
        actions.appendChild(btnFeito);
        card.appendChild(actions);

        linha.appendChild(card);
        linha.appendChild(botoes);

        return { linha, data: tarefa.data };
        }

        function carregarTarefas() {
        const lista = document.getElementById("lista-tarefas");
        lista.innerHTML = "";

        const agrupadas = {};
        tarefas.forEach((tarefa, index) => {
            if (!agrupadas[tarefa.data]) agrupadas[tarefa.data] = [];
            agrupadas[tarefa.data].push({ tarefa, index });
        });

        Object.keys(agrupadas).sort().forEach(data => {
            const dataTitle = document.createElement("div");
            dataTitle.className = "data-header";
            const [ano, mes, dia] = data.split("-");
            const dataFormatada = new Date(`${ano}-${mes}-${dia}T00:00:00`);
            dataTitle.textContent = dataFormatada.toLocaleDateString("pt-BR", {
                weekday: "long",
                year: "numeric",
                month: "long",
                day: "numeric"
            });
            lista.appendChild(dataTitle);

            agrupadas[data].forEach(({ tarefa, index }) => {
            const { linha } = criarTarefaCard(tarefa, index);
            lista.appendChild(linha);
            });
        });
        }

        carregarTarefas();
    </script>
</body>
</html>